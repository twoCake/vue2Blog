(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11a2af14"],{"5fdd":function(t,e,a){"use strict";a("f124")},"755e":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"addBlog-container"},[a("div",{staticClass:"block"},[t._v("文章标题")]),a("div",{staticStyle:{"margin-bottom":"30px"}},[a("el-input",{attrs:{placeholder:"请输入文章标题..."},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("div",{staticClass:"block"},[t._v("文章编辑")]),a("Editor",{ref:"toastuiEditor",staticStyle:{"margin-bottom":"30px"},attrs:{initialValue:t.form.editorText,height:"600px",options:t.editorOptions}}),a("div",{staticClass:"block"},[t._v("文章描述")]),a("div",{staticStyle:{"margin-bottom":"30px"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入文章描述...",rows:"6"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("div",{staticClass:"block"},[t._v("文章头图")]),a("div",{staticClass:"upload"},[a("Upload",{model:{value:t.form.thumb,callback:function(e){t.$set(t.form,"thumb",e)},expression:"form.thumb"}})],1),a("div",{staticClass:"block"},[t._v("选择分类")]),a("el-select",{attrs:{placeholder:"请选择分类等级"},on:{change:t.changeHandle},model:{value:t.form.select,callback:function(e){t.$set(t.form,"select",e)},expression:"form.select"}},t._l(t.blogTypes,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitArticleHandle}},[t._v(t._s(t.btnContent))]),"edit"===t.mode?a("el-button",{attrs:{type:"danger"},on:{click:t.cancelSubmitArticleHandle}},[t._v("取消")]):t._e()],1)],1)},n=[],o=(a("a4d3"),a("e01a"),a("f513"),a("e459")),r=a("decf"),s=a("c19d"),c=a("864d"),l=(a("f4c3"),{components:{Editor:o["a"],Upload:r["a"]},props:["mode"],data:function(){return{loading:!1,form:{title:"",editorText:"",thumb:"",select:""},blogTypes:[],imageUrl:"",editorOptions:{language:"zh-CN"},btnContent:"发布文章"}},mounted:function(){var t=this;this.loading=!0,this.getBlogTypeHandle(),"edit"===this.mode&&(this.id=this.$route.params.id,Object(c["e"])(this.id).then((function(e){t.form=e.data,t.form.select=null===e.data.category?"":e.data.category.id,t.$refs.toastuiEditor.invoke("setHTML",e.data.htmlContent)})),this.btnContent="确认修改")},methods:{getBlogTypeHandle:function(){var t=this;Object(s["d"])().then((function(e){t.loading=!1,t.blogTypes=e.data}))},submitArticleHandle:function(){var t=this;this.loading=!0;var e=this.$refs.toastuiEditor.invoke("getHTML"),a=this.$refs.toastuiEditor.invoke("getMarkdown"),i={title:this.form.title,description:this.form.description,createDate:(new Date).getTime(),categoryId:this.form.select,htmlContent:e,thumb:this.form.thumb,markdownContent:a};i.title&&i.description&&i.htmlContent&&i.categoryId?("add"===this.mode&&Object(c["a"])(i).then((function(){t.$router.push("/blogList"),t.$message({message:"文章添加成功！",type:"success"})})),"edit"===this.mode&&Object(c["c"])({id:this.form.id,data:i}).then((function(){t.$router.push("/blogList"),t.$message({message:"文章修改成功！",type:"success"})})),this.loading=!1):this.$message({message:"请填写相关内容！",type:"error"})},changeHandle:function(){this.$forceUpdate()},cancelSubmitArticleHandle:function(){this.$router.go(-1)}}}),d=l,u=(a("e23d"),a("2877")),p=Object(u["a"])(d,i,n,!1,null,"7b134a3a",null);e["a"]=p.exports},"864d":function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"e",(function(){return c}));var i=a("b775");function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Object(i["a"])({url:"/api/blog",method:"get",params:{page:t,limit:e}})}function o(t){return Object(i["a"])({url:"/api/blog/".concat(t),method:"delete"})}function r(t){return Object(i["a"])({url:"/api/blog",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/api/blog/".concat(t.id),method:"put",data:t.data})}function c(t){return Object(i["a"])({url:"/api/blog/".concat(t),method:"get"})}},8759:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("EditOrAddArticle",{attrs:{mode:"edit"}})],1)},n=[],o=a("755e"),r={components:{EditOrAddArticle:o["a"]}},s=r,c=a("2877"),l=Object(c["a"])(s,i,n,!1,null,null,null);e["default"]=l.exports},c07b:function(t,e,a){},c19d:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"e",(function(){return c}));var i=a("b775");function n(){return i["a"].get("/api/blogtype")}function o(t){return Object(i["a"])({url:"/api/blogtype",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/api/blogtype/".concat(t),method:"delete"})}function s(t){return Object(i["a"])({url:"/api/blogtype/".concat(t),method:"get"})}function c(t){return Object(i["a"])({url:"/api/blogtype/".concat(t.id),method:"put",data:t.data})}},decf:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-container"},[a("div",{staticClass:"uploadTitle"},[t._v(t._s(t.uploadTitle))]),a("div",[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess,headers:t.headers}},[t.value?a("img",{staticClass:"avatar",attrs:{src:t.value}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)])},n=[],o={props:["uploadTitle","value"],computed:{headers:function(){return{Authorization:"Bearer "+localStorage.getItem("adminToken")}}},methods:{handleAvatarSuccess:function(t,e){!t.code&&t.data&&this.$emit("input",t.data)}}},r=o,s=(a("5fdd"),a("2877")),c=Object(s["a"])(r,i,n,!1,null,"2cd21d0a",null);e["a"]=c.exports},e23d:function(t,e,a){"use strict";a("c07b")},f124:function(t,e,a){}}]);